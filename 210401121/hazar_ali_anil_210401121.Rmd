---
title: "Proje Rapor: Ali Anıl Hazar 210401121"
output:
  html_document:
    df_print: paged
---


# Q1 : Problem Tanımı

Kırsal kesimde yer alan öğrenciler, eğitimde karşılaştıkları zorluklar nedeniyle dezavantajlı bir konumda bulunmaktadır. Eğitim kalitesindeki düşük seviye ve eğitime erişimdeki sorunlar, bu öğrencilerin akademik başarılarını ve genel yaşam kalitelerini olumsuz bir şekilde etkilemektedir. Bu durumun temelinde çeşitli faktörler bulunmaktadır. Kırsal bölgelerdeki eğitimdeki eşitsizlik, ekonomik koşullar, altyapı eksiklikleri ve sosyal faktörler gibi etkenler bir araya gelerek öğrencilerin eğitimine yönelik engeller oluşturmaktadır. Bu kompleks sorunların etkili bir şekilde çözülebilmesi için detaylı bir veri analizi zorunlu hale gelmektedir. Bu analiz, kırsal kesimdeki öğrencilerin eğitim deneyimlerini daha iyi anlamamıza ve çözüm önerileri geliştirmemize olanak tanıyacaktır.

# Q2 : Proje Amacı

Toplumsal bir sorun olarak belirlenen kırsal kesimdeki öğrencilerin eğitimdeki dezavantajlı durumunu ele almak üzere hükümetle ortak bir çalışma başlatılmıştır. Şirketimiz, eğitim ve öğrenci verilerini detaylı bir şekilde analiz ederek bu soruna etkili çözümler üretecektir. Projede ele alınacak çok sayıda faktörün analizi sayesinde, sorunun temel nedenleri belirlenecek ve hükümete sunulacak öneriler, maksimum etki yaratmak ve çözümü en etkili şekilde uygulamak için tasarlanacaktır. Bu kapsamlı analiz, eğitimdeki dezavantajları en aza indirmeyi hedefleyerek, kırsal kesimdeki öğrencilerin akademik ve sosyal hayatlarını olumlu yönde etkilemeyi amaçlamaktadır.


# Q3 : Veri Seti Keşifsel Analizi

```{r echo=FALSE, message=FALSE, warning=FALSE}
library(readr)
# Veri setini okuma
mathDF <- read.csv("C:/Users/alian/Desktop/210401121/210401121/student_math_data.csv")
portugueseDF <- read.csv("C:/Users/alian/Desktop/210401121/210401121/student_portuguese_data.csv")

# Veri setinin ilk birkaç satırını gösterme
cat("Matematik Dersi Alan Öğrencilerin Veri Kümesi:\n")
head(mathDF)
cat("\nPortekizce Dersi Alan Öğrencilerin Veri Kümesi:\n")
head(portugueseDF)

# Veri seti hakkında genel bilgiler
cat("\nMatematik Dersi Veri Seti Bilgileri:\n")
str(mathDF)
cat("\nPortekizce Dersi Veri Seti Bilgileri:\n")
str(portugueseDF)

# Veri seti hakkında istatistiksel bilgiler
cat("\nMatematik Dersi Veri Seti İstatistiksel Bilgiler:\n")
summary(mathDF)
cat("\nPortekizce Dersi Veri Seti İstatistiksel Bilgiler:\n")
summary(portugueseDF)


# Veri setindeki problemli satırları kontrol etme
cat("\nMatematik Dersi Tekrarlanan Satırlar:\n")
duplicatedRowsMath <- mathDF[duplicated(mathDF), ]
duplicatedRowsMath
cat("\nPortekizce Dersi Tekrarlanan Satırlar:\n")
duplicatedRowsPortuguese <- portugueseDF[duplicated(portugueseDF), ]
duplicatedRowsPortuguese

```

# Veri Seti ve Kullanacağımız Verilerle ile ilgili Genel Bilgi
Veri setini incelediğimizde problem çözümü için kullanacağımız sütunlar, adress_type öğrencinin kırsalda mı yoksa kentte mi yaşadığını hesaplamak için, travel_time okula ulaşım süresini hesaplamak için, internet_access internet erişim bilgisini hesaplamak için, grade 1, grade 2 ve final_grade değerleri ise öğrencinin başarısını hesaplamak için kullanılacaktır.


# Q4 : Veri Seti Ön işlemesi

## Öğrencilerin Yaşadığı Bölgelerin Dağılımı

```{r echo=FALSE, message=FALSE, warning=FALSE}
adress_type <- as.factor(mathDF$address_type)
adress_freq <- table(adress_type)
barplot(adress_freq, main = "Address Type Distribution", xlab = "Address Type", ylab = "Frequency", col = "lightblue", border = "black")

```

## Öğrencilerin Eğitime Ulaşım Süresinin Dağılımı

```{r echo=FALSE, message=FALSE, warning=FALSE}

factor_travel_time <- as.factor(mathDF$travel_time)
levels <- levels(factor_travel_time)
counts <- table(factor_travel_time)
barplot(counts, main = "Travel Time Distribution", xlab = "Travel Time", ylab = "Frequency", col = "lightblue", border = "black")


```

## Öğrencilerin Ders Çalışma Sürelerinin Dağılımları

```{r echo=FALSE, message=FALSE, warning=FALSE}
internet_access <- as.factor(mathDF$internet_access)
internet_freq <- table(internet_access)
barplot(internet_freq, main = "Internet Access Distribution", xlab = "Internet Access", ylab = "Frequency", col = "lightblue", border = "black")
```

## Öğrencilerin Ders Çalışma Sürelerinin Dağılımları

```{r echo=FALSE, message=FALSE, warning=FALSE}
# Ders çalışma süresini faktöre çevir
factor_study_time <- as.factor(mathDF$study_time)

# Faktör seviyelerini sırala
levels <- levels(factor_study_time)

# Frekansları hesapla
counts <- table(factor_study_time)

# Barplot oluştur
barplot(counts, main = "Study Time Distribution", xlab = "Study Time", ylab = "Frequency", col = "lightblue", border = "black")
```

## Matematik Dersi Not Dağılımları

```{r echo=FALSE, message=FALSE, warning=FALSE}
hist(mathDF$grade_1, breaks = 10, main = "1st Term Grade Distribution", xlab = "Grade", ylab = "Frequency", col = "lightblue", border = "black")
hist(mathDF$grade_2, breaks = 10, main = "2nd Term Grade Distribution", xlab = "Grade", ylab = "Frequency", col = "lightblue", border = "black")
hist(mathDF$final_grade, breaks = 10, main = "Final Grade Distribution", xlab = "Grade", ylab = "Frequency", col = "lightblue", border = "black")

```

## Portekizce Dersi Not Dağılımları

```{r echo=FALSE, message=FALSE, warning=FALSE}
hist(portugueseDF$grade_1, breaks = 10, main = "1st Term Grade Distribution", xlab = "Grade", ylab = "Frequency", col = "lightblue", border = "black")
hist(portugueseDF$grade_2, breaks = 10, main = "2nd Term Grade Distribution", xlab = "Grade", ylab = "Frequency", col = "lightblue", border = "black")
hist(portugueseDF$final_grade, breaks = 10, main = "Final Grade Distribution", xlab = "Grade", ylab = "Frequency", col = "lightblue", border = "black")

```

## Veri Ön İşleme Aşamasında Yapılan Filtrelemeler ve Özet Rapor

```{r echo=FALSE, message=FALSE, warning=FALSE}
# Gerekli kütüphaneleri yükle
library(dplyr)
library(tibble)

# Veriyi içe aktar
mathDF <- read_csv("student_math_data.csv")
portugueseDF <- read_csv("student_portuguese_data.csv")

# 'address_type' sütununu faktöre çevir
mathDF$address_type <- as.factor(mathDF$address_type)
portugueseDF$address_type <- as.factor(portugueseDF$address_type)

# 'travel_time' değerlerini temizle ve çevir
mathDF$travel_time <- gsub("15 to 30 min.", "22", mathDF$travel_time)
mathDF$travel_time <- gsub("<15 min.", "7", mathDF$travel_time)
mathDF$travel_time <- as.numeric(gsub(",", ".", mathDF$travel_time))

portugueseDF$travel_time <- gsub("15 to 30 min.", "22", portugueseDF$travel_time)
portugueseDF$travel_time <- gsub("<15 min.", "7", portugueseDF$travel_time)
portugueseDF$travel_time <- as.numeric(gsub(",", ".", portugueseDF$travel_time))

# 'study_time' sütununu temizle ve sayısal değere çevir
mathDF$study_time <- as.numeric(gsub("2 to 5 hours", "4", mathDF$study_time))
mathDF$study_time <- as.numeric(gsub("5 to 10 hours", "7", mathDF$study_time))
mathDF$study_time <- as.numeric(gsub("<2 hours", "1", mathDF$study_time))
mathDF$study_time <- as.numeric(gsub(">10 hours", "12", mathDF$study_time))

portugueseDF$study_time <- as.numeric(gsub("2 to 5 hours", "4", portugueseDF$study_time))
portugueseDF$study_time <- as.numeric(gsub("5 to 10 hours", "7", portugueseDF$study_time))
portugueseDF$study_time <- as.numeric(gsub("<2 hours", "1", portugueseDF$study_time))
portugueseDF$study_time <- as.numeric(gsub(">10 hours", "12", portugueseDF$study_time))

# Belirli değerleri eksik veri olarak gösterenleri NA ile değiştir
mathDF[mathDF == -999] <- NA
mathDF[mathDF == "NONE"] <- NA

portugueseDF[portugueseDF == -999] <- NA
portugueseDF[portugueseDF == "NONE"] <- NA

# Belirli sütunlardaki NA değerlere sahip satırları kaldır (örneğin, 'grade_1' sütunu)
mathDF <- mathDF[!is.na(mathDF$grade_1), ]
portugueseDF <- portugueseDF[!is.na(portugueseDF$grade_1), ]

# Ön işlenmiş veri çerçevesini tibble'a çevir
tibblemathDF <- as_tibble(mathDF)
tibbleportugueseDF <- as_tibble(portugueseDF)

# 'study_time' sütununu sayısal değere çevir
tibblemathDF$study_time <- as.numeric(tibblemathDF$study_time)
tibbleportugueseDF$study_time <- as.numeric(tibbleportugueseDF$study_time)

# Ön işlenmiş tibble'ın ilk altı satırını göster
cat("Temizlenmiş ve Düzenlenmiş Matematik Dersi Veri Kümesi\n")
head(tibblemathDF)
cat("Temizlenmiş ve Düzenlenmiş Portekizce Dersi Veri Kümesi\n")
head(tibbleportugueseDF)

```

# Özet Rapor
Veri Dönüştürme: ‘address_type’, ‘travel_time’ ve ‘study_time’ sütunlarındaki değerleri dönüştürüyorsunuz. Bu dönüştürmeler, verilerinizi analiz etmek için daha uygun bir formata getirir.

Eksik Verileri İşleme: Veri setindeki eksik değerleri NA ile değiştiriyorsunuz ve ‘grade_1’ sütununda NA olan satırları kaldırıyorsunuz.

Veri Çerçevesini Tibble’a Dönüştürme: Ön işlenmiş veri çerçevenizi bir tibble’a dönüştürüyorsunuz. Tibble’lar, veri çerçevelerinin daha modern ve kullanıcı dostu bir versiyonudur.

Veri İnceleme: Son olarak, ön işlenmiş tibble’ın ilk altı satırını görüntülüyorsunuz. Bu, veri setinin bir özetini sağlar ve verilerin doğru bir şekilde yüklendiğini ve işlendiğini doğrular.



# Q5 : Veri Mühendisliği

```{r echo=FALSE, message=FALSE, warning=FALSE}
# Kütüphaneleri yükleyelim
library(ggplot2)
library(gridExtra)

# Veri setlerini birleştirme (örneğin, student_id üzerinden)
merged_data <- merge(mathDF, portugueseDF, by = "student_id")

# Her öğrenci için gradelerin ortalamasını hesapla
merged_data$average_grade <- rowMeans(merged_data[, c("grade_1.x", "grade_2.x", "final_grade.x", "grade_1.y", "grade_2.y", "final_grade.y")])

# Gradeleri ağırlıklandırma
merged_data$weighted_average_grade <- 0.4 * merged_data$average_grade + 0.3 * ((merged_data$grade_1.x + merged_data$grade_2.x) / 2 + (merged_data$grade_1.y + merged_data$grade_2.y) / 2) / 2

# Weighted_average sütununu numeric formata çevirme ve yuvarlama
merged_data$weighted_average_grade <- as.integer(round(merged_data$weighted_average_grade))

# Adres türüne göre gruplandırma ve travel_time ile internet_access değerlerinin ortalamalarını hesaplama
address_type_summary <- merged_data %>%
  group_by(address_type.x) %>%
  summarise(avg_travel_time = mean(travel_time.x),
            avg_internet_access = mean(internet_access.x),
            avg_study_time = mean(study_time.x))

# Adres türüne göre kırsal ve kentsel öğrencileri ayırma, sadece istenilen sütunları seçme ve dönüşümleri uygulama
rural_students <- merged_data %>%
  filter(address_type.x == "Rural") %>%
  select(student_id, address_type.x, weighted_average_grade, travel_time.x, internet_access.x, study_time.x)

urban_students <- merged_data %>%
  filter(address_type.x == "Urban") %>%
  select(student_id, address_type.x, weighted_average_grade, travel_time.x, internet_access.x, study_time.x)

# Her iki kategorideki öğrencilerin başlarını ekrana yazdırma
cat("Kırsal Bölgede Yaşayan Öğrencilerin Veri Kümesi\n")
head(rural_students)
cat("Kentsel Bölgede Yaşayan Öğrencilerin Veri Kümesi\n")
head(urban_students)

```

```{r echo=FALSE, message=FALSE, warning=FALSE}
# Kütüphaneleri yükleyelim
library(ggplot2)
library(gridExtra)

# Kırsal ve kentsel öğrencilerin ağırlıklı not ortalamalarının karşılaştırılması
plot_weighted_average_grade <- ggplot(merged_data, aes(x = address_type.x, y = weighted_average_grade, fill = address_type.x)) +
  geom_boxplot() +
  labs(title = "Weighted Average Grade Comparison", x = "Address Type", y = "Weighted Average Grade") +
  theme_minimal()

# Kırsal ve kentsel öğrencilerin ulaşımd için geçen sürelerinin karşılaştırılması
plot_travel_time <- ggplot(merged_data, aes(x = address_type.x, y = travel_time.x, color = address_type.x)) +
  geom_point(position = position_jitter(width = 0.2), size = 2) +
  labs(title = "Travel Time Comparison", x = "Address Type", y = "Travel Time") +
  theme_minimal()


# Kırsal ve kentsel öğrencilerin internet erişim durumlarının karşılaştırılması
plot_internet_access <- ggplot(merged_data, aes(x = address_type.x, fill = internet_access.x)) +
  geom_bar(stat = "count") +
  labs(title = "Internet Access Comparison", x = "Address Type", y = "Count") +
  theme_minimal()

# Kırsal ve kentsel öğrencilerin ortalama çalışma sürelerinin karşılaştırılması
plot_study_time <- ggplot(merged_data, aes(x = address_type.x, y = study_time.x, color = address_type.x)) +
  geom_point(position = position_jitter(width = 0.2), size = 2) +
  labs(title = "Study Time Comparison", x = "Address Type", y = "Study Time") +
  theme_minimal()


# Grafikleri düzenleyerek birleştirelim
grid.arrange(plot_weighted_average_grade, plot_travel_time, plot_internet_access, plot_study_time, ncol = 2)
```
 


```{r test_chunk, echo=FALSE, message=FALSE, warning=FALSE, include=FALSE}
testthat::test_file("tests/Q5_tests_ali_anil_hazar_210401121.R")
```